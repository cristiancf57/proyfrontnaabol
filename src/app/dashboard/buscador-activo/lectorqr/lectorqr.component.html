
<div class="col-10 mx-auto">
    <div class="card">
        <div class="card-body">
            <h5 class="card-title text-center">
                <i class="bi bi-qr-code-scan"></i> Buscador con Lector QR
            </h5>

            <!-- Estado del escaneo -->
            <div *ngIf="mensaje" class="alert alert-info text-center">
                {{ mensaje }}
            </div>

            <!-- Cámara QR -->
            <div *ngIf="escaneando" class="text-center mb-4">
                <div class="camera-container">
                    <video #videoElement class="camera-preview" autoplay playsinline></video>
                    <canvas #canvasElement class="d-none"></canvas>
                </div>
                <button class="btn btn-danger mt-3" (click)="cancelarScaneo()">
                    <i class="bi bi-stop-circle"></i> Detener Escaneo
                </button>
            </div>

            <!-- Controles principales -->
            <div *ngIf="!escaneando && !mostrarFormulario" class="text-center">
                <button class="btn btn-primary btn-lg mb-3" (click)="iniciarEscaneo()">
                    <i class="bi bi-camera"></i> Escanear Código QR
                </button>
            </div>

            <!-- Spinner de carga -->
            <div *ngIf="loading" class="text-center py-4">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Cargando...</span>
                </div>
                <p class="mt-2">Buscando en registros...</p>
            </div>

            <!-- Formulario de registro -->
            <div *ngIf="mostrarFormulario && !loading" class="mt-4">
                <h6 class="text-center text-warning">
                    <i class="bi bi-exclamation-triangle"></i> Equipo No Encontrado
                </h6>
                <p class="text-center">Complete los datos para registrar el nuevo equipo:</p>
            </div>
        </div>
    </div>
</div>