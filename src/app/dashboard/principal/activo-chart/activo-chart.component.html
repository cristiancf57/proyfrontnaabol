
 <!-- Chart -->
<div class="chart-container">
  <!-- <apx-chart
    [series]="chartOptions.series"
    [chart]="chartOptions.chart"
    [labels]="chartOptions.labels"
    [responsive]="chartOptions.responsive">
  </apx-chart> -->
   <!-- Título y controles -->

  <!-- Tarjetas de resumen -->

  <!-- Gráfico de activos - EN EL MISMO COMPONENTE -->
  <div class="container-fluid">
  
  <!-- Loading -->
  <!-- <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p class="mt-2">Cargando datos de activos...</p>
  </div> -->

  <!-- Contenido cuando hay datos -->
  <div *ngIf="!loading && activoData.length > 0" class="row">
    
    <!-- Gráfico -->
    <div class="col-lg-8">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Distribución de Activos</h5>
          <!-- <div echarts 
               [options]="chartOptions" 
               style="height: 400px; width: 100%;">
          </div> -->
        </div>
      </div>
    </div>

    <!-- Panel de Resumen -->
    <div class="col-lg-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Resumen</h5>
          
          <!-- Total -->
          <div class="mb-3 p-3 bg-primary text-white rounded">
            <h6 class="mb-1">Total de Activos</h6>
            <h2 class="mb-0">{{ totalActivos }}</h2>
          </div>

          <!-- Lista por Categoría -->
          <h6 class="mt-4 mb-3">Detalle por Categoría:</h6>
          <div class="list-group">
            <div *ngFor="let item of activoData; let i = index" 
                 class="list-group-item d-flex justify-content-between align-items-center">
              <span>
                <span class="badge me-2" 
                      [style.background]="getColor(i)">●</span>
                {{ formatearLabel(item.categoria) }}
              </span>
              <div>
                <span class="badge bg-secondary me-1">{{ item.cantidad }}</span>
                <small class="text-muted">({{ calcularPorcentaje(item.cantidad) }}%)</small>
              </div>
            </div>
          </div>

          <!-- Barras de Progreso -->
          <h6 class="mt-4 mb-3">Distribución:</h6>
          <div *ngFor="let item of activoData; let i = index" class="mb-2">
            <div class="d-flex justify-content-between mb-1">
              <small class="text-muted">{{ formatearLabel(item.categoria) }}</small>
              <small><strong>{{ calcularPorcentaje(item.cantidad) }}%</strong></small>
            </div>
            <div class="progress" style="height: 8px;">
              <div class="progress-bar" 
                   [style.width.%]="calcularPorcentaje(item.cantidad)"
                   [style.background]="getColor(i)">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabla Detallada -->
    <div class="col-12 mt-4">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">Detalle de Activos</h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead class="table-light">
                <tr>
                  <th>Categoría</th>
                  <th>Cantidad</th>
                  <th>Porcentaje</th>
                  <th>Progreso</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of activoData; let i = index">
                  <td>
                    <span class="badge me-2" [style.background]="getColor(i)">●</span>
                    <strong>{{ formatearLabel(item.categoria) }}</strong>
                  </td>
                  <td class="fw-bold">{{ item.cantidad }}</td>
                  <td>{{ calcularPorcentaje(item.cantidad) }}%</td>
                  <td>
                    <div class="progress" style="height: 10px; width: 150px;">
                      <div class="progress-bar" 
                           [style.width.%]="calcularPorcentaje(item.cantidad)"
                           [style.background]="getColor(i)">
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr class="table-primary">
                  <td><strong>TOTAL</strong></td>
                  <td><strong>{{ totalActivos }}</strong></td>
                  <td><strong>100%</strong></td>
                  <td></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Mensaje cuando no hay datos -->
  <div *ngIf="!loading && activoData.length === 0" class="text-center py-5">
    <div class="alert alert-warning">
      <h5>No hay datos disponibles</h5>
      <p class="mb-0">No se encontraron activos para mostrar.</p>
    </div>
  </div>

</div>

</div>

<!-- End Chart -->